<!-- 通用模板 -->

<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <!-- jquery -->
  <script src="https://apps.bdimg.com/libs/jquery/1.10.2/jquery.min.js"></script>
  <script src="https://apps.bdimg.com/libs/jqueryui/1.10.4/jquery-ui.min.js"></script>

  
<link rel="stylesheet" href="/css/main.css">

<meta name="generator" content="Hexo 5.0.0"></head>

<body onload="my_load()"">

  <div class="web_name_box">
    
  </div>
  
  <!-- 顶部菜单栏 -->

<div class="menu_box shadow_box">
  <div class="menu_item_box left" id="menu_preview">preview</div>
  <div class="menu_item_box left" id="menu_tags">tags</div>
  <div class="menu_item_box left" id="menu_categories">categories</div>

  <div class="search_input_box left" id="search_input_box">
    <input type="search" placeholder="" id="search_input" class="search_input">
  </div>

  <div class="menu_item_box right" id="menu_next">next</div>
  
    <div class="menu_item_box right" id="menu_guide">guide</div>
  
  <div class="menu_item_box right" id="menu_site">sites</div>
</div>

<div class="tag_box shadow_box" id="tag_box"></div>

<div class="category_box shadow_box" id="category_box"></div>

<div class="site_box shadow_box" id="site_box">
  <span class="site_item">
    <a href="/">home</a>
  </span>
  <span class="site_item">
    <a href="/archives">archives</a>
  </span>
  <span class="site_item">
    <a target="_blank" rel="noopener" href="https://github.com/NiaBie">github</a>
  </span>
  <span class="site_item">
    <a href="/knife">knives</a>
  </span>
  <span class="site_item">
    <a href="/friends">links</a>
  </span>
</div>


  <!-- 附加导航 -->
  <div class="guide_box shadow_box" id="guide_box">
    <div class="tag_list_box" id="tag_list_box">
      <span class="guide_item">tags</span>
      
        
      
    </div>

    <div class="line_box" id="guide_line_box"></div>
    <style>
      #guide_line_box {
        width: 90%;
      }
    </style>
    
    <div class="category_list_box" id="category_list_box">
      <span class="guide_item">categories</span>
      
        
          <span class="category_item">
            <a href="/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/">操作系统</a>
          </span>
        
      
    </div>

    <div class="guide_list_box border_box" id="guide_list_box"></div>
  </div>


<div class="search_result_box shadow_box" id="search_result_box">
  <div id="search_filter" class="search_list_box">
    <span id="search_filter_1" class="search_item">
      <a>only title</a>
    </span>
    <span id="search_filter_2" class="search_item">
      <a>title and content</a>
    </span>
  </div>
  <div id="search_result_list" class="search_result_list"></div>
</div>



<script>
  tags_name = new Array();
  tags_path = new Array();

  ''
    var temp = 'sage';
    tags_name.push(temp);
    temp = 'tags/sage/';
    tags_path.push(temp);
  ''
    var temp = 'python';
    tags_name.push(temp);
    temp = 'tags/python/';
    tags_path.push(temp);
  ''
    var temp = 'android studio';
    tags_name.push(temp);
    temp = 'tags/android-studio/';
    tags_path.push(temp);
  ''
    var temp = 'android';
    tags_name.push(temp);
    temp = 'tags/android/';
    tags_path.push(temp);
  ''
    var temp = 'adb';
    tags_name.push(temp);
    temp = 'tags/adb/';
    tags_path.push(temp);
  ''
    var temp = 'java';
    tags_name.push(temp);
    temp = 'tags/java/';
    tags_path.push(temp);
  ''
    var temp = 'cubism';
    tags_name.push(temp);
    temp = 'tags/cubism/';
    tags_path.push(temp);
  ''
    var temp = 'typescript';
    tags_name.push(temp);
    temp = 'tags/typescript/';
    tags_path.push(temp);
  ''
    var temp = 'javascript';
    tags_name.push(temp);
    temp = 'tags/javascript/';
    tags_path.push(temp);
  ''
    var temp = 'live2d';
    tags_name.push(temp);
    temp = 'tags/live2d/';
    tags_path.push(temp);
  ''
    var temp = 'npm';
    tags_name.push(temp);
    temp = 'tags/npm/';
    tags_path.push(temp);
  ''
    var temp = 'FL Studio';
    tags_name.push(temp);
    temp = 'tags/FL-Studio/';
    tags_path.push(temp);
  ''
    var temp = 'midi';
    tags_name.push(temp);
    temp = 'tags/midi/';
    tags_path.push(temp);
  ''
    var temp = 'linux';
    tags_name.push(temp);
    temp = 'tags/linux/';
    tags_path.push(temp);
  ''
    var temp = 'powerline';
    tags_name.push(temp);
    temp = 'tags/powerline/';
    tags_path.push(temp);
  ''
    var temp = 'zsh';
    tags_name.push(temp);
    temp = 'tags/zsh/';
    tags_path.push(temp);
  ''
    var temp = 'vim';
    tags_name.push(temp);
    temp = 'tags/vim/';
    tags_path.push(temp);
  ''
    var temp = 'git';
    tags_name.push(temp);
    temp = 'tags/git/';
    tags_path.push(temp);
  ''
    var temp = 'pip';
    tags_name.push(temp);
    temp = 'tags/pip/';
    tags_path.push(temp);
  ''
    var temp = 'gnome';
    tags_name.push(temp);
    temp = 'tags/gnome/';
    tags_path.push(temp);
  ''
    var temp = 'c';
    tags_name.push(temp);
    temp = 'tags/c/';
    tags_path.push(temp);
  ''
    var temp = 'makefile';
    tags_name.push(temp);
    temp = 'tags/makefile/';
    tags_path.push(temp);
  ''
    var temp = 'PyQt5';
    tags_name.push(temp);
    temp = 'tags/PyQt5/';
    tags_path.push(temp);
  ''
    var temp = 'qt';
    tags_name.push(temp);
    temp = 'tags/qt/';
    tags_path.push(temp);
  ''
    var temp = 'cpp';
    tags_name.push(temp);
    temp = 'tags/cpp/';
    tags_path.push(temp);
  ''
    var temp = 'deb';
    tags_name.push(temp);
    temp = 'tags/deb/';
    tags_path.push(temp);
  ''
    var temp = 'debreate';
    tags_name.push(temp);
    temp = 'tags/debreate/';
    tags_path.push(temp);
  ''
    var temp = '华为';
    tags_name.push(temp);
    temp = 'tags/华为/';
    tags_path.push(temp);
  ''
    var temp = 'php';
    tags_name.push(temp);
    temp = 'tags/php/';
    tags_path.push(temp);
  ''
    var temp = 'apahce2';
    tags_name.push(temp);
    temp = 'tags/apahce2/';
    tags_path.push(temp);
  ''
    var temp = 'latex';
    tags_name.push(temp);
    temp = 'tags/latex/';
    tags_path.push(temp);
  ''
    var temp = 'html';
    tags_name.push(temp);
    temp = 'tags/html/';
    tags_path.push(temp);
  ''
    var temp = 'css';
    tags_name.push(temp);
    temp = 'tags/css/';
    tags_path.push(temp);
  ''
    var temp = 'bucket';
    tags_name.push(temp);
    temp = 'tags/bucket/';
    tags_path.push(temp);
  ''
    var temp = '七牛云';
    tags_name.push(temp);
    temp = 'tags/七牛云/';
    tags_path.push(temp);
  ''
    var temp = 'cdn';
    tags_name.push(temp);
    temp = 'tags/cdn/';
    tags_path.push(temp);
  ''
    var temp = 'chrome';
    tags_name.push(temp);
    temp = 'tags/chrome/';
    tags_path.push(temp);
  ''
    var temp = 'qqbrowser';
    tags_name.push(temp);
    temp = 'tags/qqbrowser/';
    tags_path.push(temp);
  ''
    var temp = 'cmake';
    tags_name.push(temp);
    temp = 'tags/cmake/';
    tags_path.push(temp);
  ''
    var temp = '正则表达式';
    tags_name.push(temp);
    temp = 'tags/正则表达式/';
    tags_path.push(temp);
  ''
    var temp = 'http';
    tags_name.push(temp);
    temp = 'tags/http/';
    tags_path.push(temp);
  ''
    var temp = 'eigen';
    tags_name.push(temp);
    temp = 'tags/eigen/';
    tags_path.push(temp);
  ''
    var temp = 'ffmpeg';
    tags_name.push(temp);
    temp = 'tags/ffmpeg/';
    tags_path.push(temp);
  ''
    var temp = 'opencv';
    tags_name.push(temp);
    temp = 'tags/opencv/';
    tags_path.push(temp);
  ''
    var temp = 'ndk';
    tags_name.push(temp);
    temp = 'tags/ndk/';
    tags_path.push(temp);
  ''
    var temp = 'gcc';
    tags_name.push(temp);
    temp = 'tags/gcc/';
    tags_path.push(temp);
  ''
    var temp = 'assemly';
    tags_name.push(temp);
    temp = 'tags/assemly/';
    tags_path.push(temp);
  ''
    var temp = 'gdb';
    tags_name.push(temp);
    temp = 'tags/gdb/';
    tags_path.push(temp);
  ''
    var temp = 'ssh';
    tags_name.push(temp);
    temp = 'tags/ssh/';
    tags_path.push(temp);
  ''
    var temp = 'windows';
    tags_name.push(temp);
    temp = 'tags/windows/';
    tags_path.push(temp);
  ''
    var temp = 'grub';
    tags_name.push(temp);
    temp = 'tags/grub/';
    tags_path.push(temp);
  ''
    var temp = 'hexo';
    tags_name.push(temp);
    temp = 'tags/hexo/';
    tags_path.push(temp);
  ''
    var temp = 'swig';
    tags_name.push(temp);
    temp = 'tags/swig/';
    tags_path.push(temp);
  ''
    var temp = 'ejs';
    tags_name.push(temp);
    temp = 'tags/ejs/';
    tags_path.push(temp);
  ''
    var temp = 'mathjax';
    tags_name.push(temp);
    temp = 'tags/mathjax/';
    tags_path.push(temp);
  ''
    var temp = 'katex';
    tags_name.push(temp);
    temp = 'tags/katex/';
    tags_path.push(temp);
  ''
    var temp = '阿里云';
    tags_name.push(temp);
    temp = 'tags/阿里云/';
    tags_path.push(temp);
  ''
    var temp = 'shell';
    tags_name.push(temp);
    temp = 'tags/shell/';
    tags_path.push(temp);
  ''
    var temp = 'jni';
    tags_name.push(temp);
    temp = 'tags/jni/';
    tags_path.push(temp);
  ''
    var temp = 'jsdelivr';
    tags_name.push(temp);
    temp = 'tags/jsdelivr/';
    tags_path.push(temp);
  ''
    var temp = 'jquery';
    tags_name.push(temp);
    temp = 'tags/jquery/';
    tags_path.push(temp);
  ''
    var temp = 'krita';
    tags_name.push(temp);
    temp = 'tags/krita/';
    tags_path.push(temp);
  ''
    var temp = 'mac';
    tags_name.push(temp);
    temp = 'tags/mac/';
    tags_path.push(temp);
  ''
    var temp = 'brew';
    tags_name.push(temp);
    temp = 'tags/brew/';
    tags_path.push(temp);
  ''
    var temp = 'matlab';
    tags_name.push(temp);
    temp = 'tags/matlab/';
    tags_path.push(temp);
  ''
    var temp = 'visual studio';
    tags_name.push(temp);
    temp = 'tags/visual-studio/';
    tags_path.push(temp);
  ''
    var temp = 'csharp';
    tags_name.push(temp);
    temp = 'tags/csharp/';
    tags_path.push(temp);
  ''
    var temp = 'mysql';
    tags_name.push(temp);
    temp = 'tags/mysql/';
    tags_path.push(temp);
  ''
    var temp = 'sql';
    tags_name.push(temp);
    temp = 'tags/sql/';
    tags_path.push(temp);
  ''
    var temp = 'unpkg';
    tags_name.push(temp);
    temp = 'tags/unpkg/';
    tags_path.push(temp);
  ''
    var temp = 'bfs';
    tags_name.push(temp);
    temp = 'tags/bfs/';
    tags_path.push(temp);
  ''
    var temp = 'dfs';
    tags_name.push(temp);
    temp = 'tags/dfs/';
    tags_path.push(temp);
  ''
    var temp = 'dijkstra算法';
    tags_name.push(temp);
    temp = 'tags/dijkstra算法/';
    tags_path.push(temp);
  ''
    var temp = 'dinic算法';
    tags_name.push(temp);
    temp = 'tags/dinic算法/';
    tags_path.push(temp);
  ''
    var temp = 'ek算法';
    tags_name.push(temp);
    temp = 'tags/ek算法/';
    tags_path.push(temp);
  ''
    var temp = 'floyd算法';
    tags_name.push(temp);
    temp = 'tags/floyd算法/';
    tags_path.push(temp);
  ''
    var temp = 'km算法';
    tags_name.push(temp);
    temp = 'tags/km算法/';
    tags_path.push(temp);
  ''
    var temp = 'kmp算法';
    tags_name.push(temp);
    temp = 'tags/kmp算法/';
    tags_path.push(temp);
  ''
    var temp = 'kruskal算法';
    tags_name.push(temp);
    temp = 'tags/kruskal算法/';
    tags_path.push(temp);
  ''
    var temp = 'morris算法';
    tags_name.push(temp);
    temp = 'tags/morris算法/';
    tags_path.push(temp);
  ''
    var temp = 'prim算法';
    tags_name.push(temp);
    temp = 'tags/prim算法/';
    tags_path.push(temp);
  ''
    var temp = 'tarjan算法';
    tags_name.push(temp);
    temp = 'tags/tarjan算法/';
    tags_path.push(temp);
  ''
    var temp = '树的遍历';
    tags_name.push(temp);
    temp = 'tags/树的遍历/';
    tags_path.push(temp);
  ''
    var temp = '匈牙利算法';
    tags_name.push(temp);
    temp = 'tags/匈牙利算法/';
    tags_path.push(temp);
  ''
    var temp = 'orb-slam';
    tags_name.push(temp);
    temp = 'tags/orb-slam/';
    tags_path.push(temp);
  ''
    var temp = 'photoshop';
    tags_name.push(temp);
    temp = 'tags/photoshop/';
    tags_path.push(temp);
  ''
    var temp = '绘画';
    tags_name.push(temp);
    temp = 'tags/绘画/';
    tags_path.push(temp);
  ''
    var temp = 'numpy';
    tags_name.push(temp);
    temp = 'tags/numpy/';
    tags_path.push(temp);
  ''
    var temp = 'sklearn';
    tags_name.push(temp);
    temp = 'tags/sklearn/';
    tags_path.push(temp);
  ''
    var temp = 'matplotlib';
    tags_name.push(temp);
    temp = 'tags/matplotlib/';
    tags_path.push(temp);
  ''
    var temp = '反编译';
    tags_name.push(temp);
    temp = 'tags/反编译/';
    tags_path.push(temp);
  ''
    var temp = 'slenium';
    tags_name.push(temp);
    temp = 'tags/slenium/';
    tags_path.push(temp);
  ''
    var temp = 'phantomjs';
    tags_name.push(temp);
    temp = 'tags/phantomjs/';
    tags_path.push(temp);
  ''
    var temp = 'rss';
    tags_name.push(temp);
    temp = 'tags/rss/';
    tags_path.push(temp);
  ''
    var temp = 'xml';
    tags_name.push(temp);
    temp = 'tags/xml/';
    tags_path.push(temp);
  ''
    var temp = '爬虫';
    tags_name.push(temp);
    temp = 'tags/爬虫/';
    tags_path.push(temp);
  ''
    var temp = 'ajax';
    tags_name.push(temp);
    temp = 'tags/ajax/';
    tags_path.push(temp);
  ''
    var temp = 'termux';
    tags_name.push(temp);
    temp = 'tags/termux/';
    tags_path.push(temp);
  ''
    var temp = '内网穿透';
    tags_name.push(temp);
    temp = 'tags/内网穿透/';
    tags_path.push(temp);
  ''
    var temp = 'stitch';
    tags_name.push(temp);
    temp = 'tags/stitch/';
    tags_path.push(temp);
  ''
    var temp = 'sublime';
    tags_name.push(temp);
    temp = 'tags/sublime/';
    tags_path.push(temp);
  ''
    var temp = 'svg';
    tags_name.push(temp);
    temp = 'tags/svg/';
    tags_path.push(temp);
  ''
    var temp = 'tmux';
    tags_name.push(temp);
    temp = 'tags/tmux/';
    tags_path.push(temp);
  ''
    var temp = 'ubuntu';
    tags_name.push(temp);
    temp = 'tags/ubuntu/';
    tags_path.push(temp);
  ''
    var temp = 'wlan';
    tags_name.push(temp);
    temp = 'tags/wlan/';
    tags_path.push(temp);
  ''
    var temp = 'lol';
    tags_name.push(temp);
    temp = 'tags/lol/';
    tags_path.push(temp);
  ''
    var temp = 'hyper';
    tags_name.push(temp);
    temp = 'tags/hyper/';
    tags_path.push(temp);
  ''
    var temp = 'vpn';
    tags_name.push(temp);
    temp = 'tags/vpn/';
    tags_path.push(temp);
  ''
    var temp = 'shadowsocks';
    tags_name.push(temp);
    temp = 'tags/shadowsocks/';
    tags_path.push(temp);
  ''
    var temp = 'ssr';
    tags_name.push(temp);
    temp = 'tags/ssr/';
    tags_path.push(temp);
  ''
    var temp = '驱动';
    tags_name.push(temp);
    temp = 'tags/驱动/';
    tags_path.push(temp);
  ''
    var temp = 'unity';
    tags_name.push(temp);
    temp = 'tags/unity/';
    tags_path.push(temp);
  ''
    var temp = 'vlfeat';
    tags_name.push(temp);
    temp = 'tags/vlfeat/';
    tags_path.push(temp);
  ''
    var temp = 'vscode';
    tags_name.push(temp);
    temp = 'tags/vscode/';
    tags_path.push(temp);
  ''
    var temp = 'vundle';
    tags_name.push(temp);
    temp = 'tags/vundle/';
    tags_path.push(temp);
  ''
    var temp = 'wegame';
    tags_name.push(temp);
    temp = 'tags/wegame/';
    tags_path.push(temp);
  ''
    var temp = 'mathematica';
    tags_name.push(temp);
    temp = 'tags/mathematica/';
    tags_path.push(temp);
  ''
    var temp = 'wordpress';
    tags_name.push(temp);
    temp = 'tags/wordpress/';
    tags_path.push(temp);
  ''
    var temp = 'apache';
    tags_name.push(temp);
    temp = 'tags/apache/';
    tags_path.push(temp);
  ''
    var temp = 'xampp';
    tags_name.push(temp);
    temp = 'tags/xampp/';
    tags_path.push(temp);
  ''
    var temp = '帧同步';
    tags_name.push(temp);
    temp = 'tags/帧同步/';
    tags_path.push(temp);
  ''
    var temp = '航位推算';
    tags_name.push(temp);
    temp = 'tags/航位推算/';
    tags_path.push(temp);
  ''
    var temp = '百度网盘';
    tags_name.push(temp);
    temp = 'tags/百度网盘/';
    tags_path.push(temp);
  ''
    var temp = 'sai';
    tags_name.push(temp);
    temp = 'tags/sai/';
    tags_path.push(temp);
  ''
    var temp = 'medibang paint';
    tags_name.push(temp);
    temp = 'tags/medibang-paint/';
    tags_path.push(temp);
  ''
    var temp = 'gradle';
    tags_name.push(temp);
    temp = 'tags/gradle/';
    tags_path.push(temp);
  ''
    var temp = 'javacv';
    tags_name.push(temp);
    temp = 'tags/javacv/';
    tags_path.push(temp);
  ''
    var temp = '微电子';
    tags_name.push(temp);
    temp = 'tags/微电子/';
    tags_path.push(temp);
  ''
  // 因为path和name只有前缀不同,所以分别排序之后相对顺序还是一样的
  tags_name.sort();
  tags_path.sort();
  for (var i = 0; i < tags_name.length; i ++)
  {
    $("#tag_box").append("<span class='tag_item'><a href='/" + tags_path[i] + "'>" + tags_name[i] + "</a></span>\n");
  }


  categories_name = new Array();
  categories_path = new Array();

  ''
    var temp = '问题求解';
    categories_name.push(temp);
    temp = 'categories/问题求解/';
    categories_path.push(temp);
  ''
    var temp = '操作系统';
    categories_name.push(temp);
    temp = 'categories/操作系统/';
    categories_path.push(temp);
  ''
    var temp = '人工智能';
    categories_name.push(temp);
    temp = 'categories/人工智能/';
    categories_path.push(temp);
  ''
    var temp = '微电子';
    categories_name.push(temp);
    temp = 'categories/微电子/';
    categories_path.push(temp);
  ''
    var temp = '数据库';
    categories_name.push(temp);
    temp = 'categories/数据库/';
    categories_path.push(temp);
  ''
    var temp = '数据通信';
    categories_name.push(temp);
    temp = 'categories/数据通信/';
    categories_path.push(temp);
  ''
    var temp = '数理逻辑';
    categories_name.push(temp);
    temp = 'categories/数理逻辑/';
    categories_path.push(temp);
  ''
    var temp = '概率论与数理统计';
    categories_name.push(temp);
    temp = 'categories/概率论与数理统计/';
    categories_path.push(temp);
  ''
    var temp = '计算机网络';
    categories_name.push(temp);
    temp = 'categories/计算机网络/';
    categories_path.push(temp);
  ''
  // 因为path和name只有前缀不同,所以分别排序之后相对顺序还是一样的
  categories_name.sort();
  categories_path.sort();
  for (var i = 0; i < categories_name.length; i ++)
  {
    $("#category_box").append("<span class='category_item'><a href='/" + categories_path[i] + "'>" + categories_name[i] + "</a></span>\n");
  }
</script>

<script>
  // TODO 搜索
</script>
  <!-- latex公式渲染 -->



<script>
  document.temp_latex = '1';// 全局变量,latex公式渲染方式
</script>


<!-- mathjax -->
<script type="text/x-mathjax-config">
  console.log("mathjax rendering");
  
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [
        ['$','$']
      ],
      displayMath: [
        ['$$', '$$']
      ],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {  
      noUndefined: { 
        attributes: { 
          mathcolor: "red",
          mathbackground: "#FFEEEE",
          mathsize: "10%"
        } 
      }
    }
  });

  MathJax.Hub.Queue(["Typeset", MathJax.Hub])
</script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/hexo-simple-theme/hexo_latex@1.0.4/mathjax/MathJax.js?config=TeX-AMS_HTML-full"></script>
<script>
  console.log("mathjax rendering");
</script>


  <!-- 文章 -->

<div class="main_container">
  <div class="main_box border_box">
    <span class="post_title" id="post_title">os复习</span>
    <br>
    <span class="post_date">2019-06-21</span>
    
    <div class="line_box" id="post_line_box"></div>
    <style>
      #post_line_box {
        width: 100%;
        margin-top: 10px;
      }
    </style>
  
    <ul>
<li>1题基本概念</li>
<li>2题进程和虚存</li>
<li>1题文件系统</li>
<li>1题并发编程</li>
</ul>
<h1 id="编译-链接"><a href="#编译-链接" class="headerlink" title="编译 链接"></a>编译 链接</h1><h2 id="gcc-o的系统调用"><a href="#gcc-o的系统调用" class="headerlink" title="gcc -o的系统调用"></a><code>gcc -o</code>的系统调用</h2><ul>
<li><p>预处理-&gt;编译-&gt;链接</p>
</li>
<li><p><code>strace</code>:</p>
<ul>
<li><code>-f</code>:跟踪由fork调用所产生的子进程</li>
</ul>
</li>
</ul>
<h2 id="elf文件格式"><a href="#elf文件格式" class="headerlink" title="elf文件格式"></a><code>elf</code>文件格式</h2><ul>
<li><code>readelf</code>命令</li>
</ul>
<h1 id="终端-shell"><a href="#终端-shell" class="headerlink" title="终端 shell"></a>终端 shell</h1><h2 id="为什么按键能显示在屏幕上-按下回车命令就会执行"><a href="#为什么按键能显示在屏幕上-按下回车命令就会执行" class="headerlink" title="为什么按键能显示在屏幕上?按下回车命令就会执行?"></a>为什么按键能显示在屏幕上?按下回车命令就会执行?</h2><h3 id="I-O设备模型"><a href="#I-O设备模型" class="headerlink" title="I/O设备模型"></a><strong>I/O设备模型</strong></h3><ul>
<li>I/O设备:可以与计算机(?)进行数据传输的硬件(?)<ol>
<li>发送命令</li>
<li>读取状态</li>
<li>传输数据</li>
</ol>
</li>
<li>设备驱动程序:进程(operating system?)与设备控制器(?)之间的通信程序</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ ps</span><br><span class="line">  PID TTY          TIME CMD</span><br><span class="line"> 6577 pts/3    00:00:00 zsh</span><br><span class="line"> 9178 pts/3    00:00:00 ps</span><br><span class="line"></span><br><span class="line">$ ps -l</span><br><span class="line">F S   UID   PID  PPID  C PRI  NI ADDR SZ WCHAN  TTY          TIME CMD</span><br><span class="line">0 S  1000  6577  1883  0  80   0 -  7676 sigsus pts/3    00:00:00 zsh</span><br><span class="line">4 R  1000  9265  6577  0  80   0 -  7531 -      pts/3    00:00:00 ps</span><br></pre></td></tr></table></figure>

<ul>
<li>polling</li>
<li>interupt</li>
<li>hybrid</li>
<li>DMA(直接存储器访问):允许外设可以独立地直接读写系统的存储器(?),而不需要cpu介入处理</li>
</ul>
<h2 id="hello如何被执行"><a href="#hello如何被执行" class="headerlink" title="./hello如何被执行"></a><code>./hello</code>如何被执行</h2><ol>
<li>先调用<code>fork</code></li>
<li>子进程调用<code>execve</code>-&gt;<code>hello</code></li>
<li>父进程<code>wait</code></li>
</ol>
<ul>
<li><code>execve</code>不会改变进程文件的状态,只会把进程替换成另一个程序</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo <span class="built_in">echo</span> <span class="string">&quot;a&quot;</span> &gt; shit</span><br><span class="line">zsh: 权限不够: shit <span class="comment"># 重定向发生在`execve`之前,open失败</span></span><br><span class="line"></span><br><span class="line">$ sudo bash -c <span class="string">&#x27;echo &quot;a&quot; &gt; shit&#x27;</span></span><br></pre></td></tr></table></figure>

<h1 id="加载器-文件如何变成进程"><a href="#加载器-文件如何变成进程" class="headerlink" title="加载器(文件如何变成进程?)"></a>加载器(文件如何变成进程?)</h1><h2 id="第一条指令在哪里"><a href="#第一条指令在哪里" class="headerlink" title="第一条指令在哪里?"></a><strong>第一条指令在哪里?</strong></h2><h2 id="main函数执行之前-系统发生了什么"><a href="#main函数执行之前-系统发生了什么" class="headerlink" title="main函数执行之前,系统发生了什么?"></a><code>main</code>函数执行之前,系统发生了什么?</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">gdb shit</span><br><span class="line"></span><br><span class="line">(gdb) starti</span><br><span class="line">Program stopped.</span><br><span class="line">0x00007ffff7fd4090 <span class="keyword">in</span> _start () from /lib64/ld-linux-x86-64.so.2 </span><br><span class="line"><span class="comment"># 不是hello的_start,是加载器的_start(静态链接)(动态加载在操作系统的...)</span></span><br><span class="line"></span><br><span class="line">(gdb) info inferior <span class="comment"># 查看进程号</span></span><br><span class="line">* 1    process 6569      /shit</span><br><span class="line"></span><br><span class="line">$ pmap 6569</span><br><span class="line">6569:   /shit</span><br><span class="line">0000555555554000      4K r---- shit <span class="comment"># 代码和数据</span></span><br><span class="line">0000555555555000      4K r-x-- shit</span><br><span class="line">0000555555556000      4K r---- shit</span><br><span class="line">0000555555557000      8K rw--- shit</span><br><span class="line">00007ffff7fce000     12K r----   [ anon ]</span><br><span class="line">00007ffff7fd1000      8K r-x--   [ anon ]</span><br><span class="line">00007ffff7fd3000      4K r---- ld-2.28.so</span><br><span class="line">00007ffff7fd4000    128K r-x-- ld-2.28.so</span><br><span class="line">00007ffff7ff4000     32K r---- ld-2.28.so</span><br><span class="line">00007ffff7ffc000      8K rw--- ld-2.28.so</span><br><span class="line">00007ffff7ffe000      4K rw---   [ anon ]</span><br><span class="line">00007ffffffde000    132K rw---   [ stack ]</span><br><span class="line">ffffffffff600000      4K r-x--   [ anon ]</span><br><span class="line"> total              352K</span><br><span class="line"></span><br><span class="line">(gdb) b _start</span><br><span class="line">Breakpoint 1 at 0x555555555060</span><br><span class="line"></span><br><span class="line">(gdb) c</span><br><span class="line">Breakpoint 1, 0x0000555555555060 <span class="keyword">in</span> _start ()</span><br><span class="line"></span><br><span class="line">$ pmap 6569</span><br><span class="line">6569:   /shit</span><br><span class="line">0000555555554000      4K r---- shit</span><br><span class="line">0000555555555000      4K r-x-- shit</span><br><span class="line">0000555555556000      4K r---- shit</span><br><span class="line">0000555555557000      4K r---- shit</span><br><span class="line">0000555555558000      4K rw--- shit</span><br><span class="line">00007ffff7dc3000    136K r---- libc-2.28.so <span class="comment"># printf的代码</span></span><br><span class="line">00007ffff7de5000   1476K r-x-- libc-2.28.so</span><br><span class="line">00007ffff7f56000    304K r---- libc-2.28.so</span><br><span class="line">00007ffff7fa2000      4K ----- libc-2.28.so</span><br><span class="line">00007ffff7fa3000     16K r---- libc-2.28.so</span><br><span class="line">00007ffff7fa7000      8K rw--- libc-2.28.so</span><br><span class="line">00007ffff7fa9000     24K rw---   [ anon ]</span><br><span class="line">00007ffff7fce000     12K r----   [ anon ]</span><br><span class="line">00007ffff7fd1000      8K r-x--   [ anon ]</span><br><span class="line">00007ffff7fd3000      4K r---- ld-2.28.so</span><br><span class="line">00007ffff7fd4000    128K r-x-- ld-2.28.so</span><br><span class="line">00007ffff7ff4000     32K r---- ld-2.28.so</span><br><span class="line">00007ffff7ffc000      4K r---- ld-2.28.so</span><br><span class="line">00007ffff7ffd000      4K rw--- ld-2.28.so</span><br><span class="line">00007ffff7ffe000      4K rw---   [ anon ]</span><br><span class="line">00007ffffffde000    132K rw---   [ stack ]</span><br><span class="line">ffffffffff600000      4K r-x--   [ anon ]</span><br><span class="line"> total             2320K</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line">Breakpoint 1, 0x0000555555555149 <span class="keyword">in</span> main ()</span><br><span class="line"></span><br><span class="line">$ pmap 6569</span><br><span class="line"><span class="comment"># 输出同上</span></span><br></pre></td></tr></table></figure>

<h1 id="printf"><a href="#printf" class="headerlink" title="printf"></a>printf</h1><h2 id="printf代码位于何处"><a href="#printf代码位于何处" class="headerlink" title="printf代码位于何处?"></a><code>printf</code>代码位于何处?</h2><ul>
<li><code>objdump</code></li>
</ul>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">void</span> __attribute__ ((constructor)) fuck()<span class="comment">// 在main之前执行</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">&quot;hello\n&quot;</span>);<span class="comment">// 编译优化,puts</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="实现线程安全的printf-20分的并发编程题"><a href="#实现线程安全的printf-20分的并发编程题" class="headerlink" title="实现线程安全的printf?(20分的并发编程题)"></a><strong>实现线程安全的<code>printf</code></strong>?(20分的并发编程题)</h2><h3 id="PV操作"><a href="#PV操作" class="headerlink" title="PV操作"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/wzh402/article/details/44889671">PV操作</a></h3><ul>
<li>P操作<code>P(S)</code>:将信号量S减去1,若结果小于0,则把调用<code>P(S)</code>的进程置成等待信号量S的状态,即为请求资源</li>
<li>V操作<code>V(S)</code>:将信号量S加上1,若结果不大于0,则释放一个等待信号量S的进程,即为释放资源</li>
</ul>
<h3 id="生产者消费者问题"><a href="#生产者消费者问题" class="headerlink" title="生产者消费者问题"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/liushall/article/details/81569609">生产者消费者问题</a></h3><ul>
<li>条件变量(先上锁?)</li>
</ul>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">producer</span><span class="params">()</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">while</span> (<span class="number">1</span>) &#123;</span><br><span class="line">    mutex_lock(&amp;mutex);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (count == n) wait(&amp;notfull, &amp;mutex);</span><br><span class="line">    produce();</span><br><span class="line">    count ++;</span><br><span class="line">    signal(&amp;notempty);</span><br><span class="line"></span><br><span class="line">    mutex_unlock(&amp;mutex);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">consumer</span><span class="params">()</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">while</span> (<span class="number">1</span>) &#123;</span><br><span class="line">    mutex_lock(&amp;mutex);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (count == <span class="number">0</span>) wait(&amp;notempty, &amp;mutex);</span><br><span class="line">    consume();</span><br><span class="line">    count --;</span><br><span class="line">    signal(&amp;notfull);</span><br><span class="line">    </span><br><span class="line">    mutex_unlock(&amp;mutex);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>信号量(后上锁?)</li>
</ul>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">producer</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">while</span> (<span class="number">1</span>) &#123;</span><br><span class="line">    P(&amp;space);</span><br><span class="line">    mutex_lock(&amp;mutex);</span><br><span class="line"></span><br><span class="line">    produce();</span><br><span class="line"></span><br><span class="line">    mutex_unlock(&amp;mutex);</span><br><span class="line">    V(&amp;items);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">consumer</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">while</span> (<span class="number">1</span>) &#123;</span><br><span class="line">    P(&amp;items);</span><br><span class="line">    mutex_lock(&amp;mutex);</span><br><span class="line"></span><br><span class="line">    consume();</span><br><span class="line"></span><br><span class="line">    mutex_unlock(&amp;mutex);</span><br><span class="line">    V(&amp;space);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="printf末尾换行"><a href="#printf末尾换行" class="headerlink" title="printf末尾换行"></a>printf末尾换行</h2><blockquote>
<p>异常退出</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  FILE *fp = fopen(<span class="string">&quot;del&quot;</span>, <span class="string">&quot;w&quot;</span>);</span><br><span class="line">  setbuf(fp, <span class="literal">NULL</span>); <span class="comment">// 自定义fp的缓冲区,NULL:不要缓冲区</span></span><br><span class="line">  <span class="built_in">fputs</span>(<span class="string">&quot;fuck&quot;</span>, fp);</span><br><span class="line">  assert(<span class="number">0</span>);<span class="comment">// 程序异常退出</span></span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># cont&#x27;d</span></span><br><span class="line">$ gcc hello.c -o shit</span><br><span class="line">$ ./shit</span><br><span class="line">shit: hello.c:11: main: Assertion `0<span class="string">&#x27; failed.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$ cat del</span></span><br><span class="line"><span class="string">fuck%</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>fork</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i ++) &#123;</span><br><span class="line">    fork();</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;hello\n&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="center">n</th>
<th align="center"><code>./hello │ wc -l</code></th>
<th align="center"><code>./hello</code></th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center">2</td>
<td align="center">2</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center">8</td>
<td align="center">6</td>
</tr>
</tbody></table>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  setbuf(<span class="built_in">stdout</span>, <span class="literal">NULL</span>);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i ++) &#123;</span><br><span class="line">    fork();</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;hello\n&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="center">n</th>
<th align="center"><code>./hello │ wc -l</code></th>
<th align="center"><code>./hello</code></th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center">2</td>
<td align="center">2</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center">6</td>
<td align="center">6</td>
</tr>
</tbody></table>
<h2 id="printf的系统调用"><a href="#printf的系统调用" class="headerlink" title="printf的系统调用"></a>printf的系统调用</h2><ul>
<li><code>ltrace</code>命令</li>
<li>libc缓冲区</li>
<li>write系统调用</li>
</ul>
<h1 id="write"><a href="#write" class="headerlink" title="write"></a>write</h1><h2 id="write写到哪里"><a href="#write写到哪里" class="headerlink" title="write写到哪里?"></a>write写到哪里?</h2><ul>
<li>文件描述符对应的文件,例如一个设备(<code>/dev/ttyx</code>),或是文件系统中的一个文件</li>
</ul>
<h2 id="文件系统如何实现"><a href="#文件系统如何实现" class="headerlink" title="文件系统如何实现?"></a><strong>文件系统如何实现</strong>?</h2><ul>
<li>文件系统:存储和组织计算机数据的方法(?)</li>
</ul>
<h3 id="FAT-文件分配表"><a href="#FAT-文件分配表" class="headerlink" title="FAT(文件分配表)"></a><strong>FAT</strong>(文件分配表)</h3><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/u010650845/article/details/60881687">FAT32文件系统快速入门,CSDN</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/u010650845/article/details/60780979">长文件名</a></p>
<h3 id="ext2-inode"><a href="#ext2-inode" class="headerlink" title="ext2(inode)"></a><strong>ext2</strong>(inode)</h3><p><a target="_blank" rel="noopener" href="http://linux.vbird.org/linux_basic/0230filesystem.php#top">鸟哥的Linux私房菜:Linux的ext2档案系统</a></p>
<ul>
<li>最大单一文件大小<ol>
<li>12直接,1间接,1双间接,1三间接,设块大小为x(kb),1个block号4byte</li>
<li><code>x*12 + x*(x*1024/4) + x*(x*1024/4)^2 + x*(x*1024/4)^3</code>(byte)</li>
</ol>
</li>
<li>资料存放区:<code>inode table</code>,<code>data block</code></li>
<li><code>metadata</code>:<code>superblock</code>,<code>block bitmap</code>,<code>inode bitmap</code></li>
</ul>
<h2 id="如何保护我们的数据不受损害"><a href="#如何保护我们的数据不受损害" class="headerlink" title="如何保护我们的数据不受损害?"></a><strong>如何保护我们的数据不受损害</strong>?</h2><h3 id="RAID"><a href="#RAID" class="headerlink" title="RAID"></a>RAID</h3><p><a target="_blank" rel="noopener" href="http://linux.vbird.org/linux_basic/0420quota.php#raid">鸟哥的Linux私房菜:Software RAID</a></p>
<table>
<thead>
<tr>
<th align="center">RAID</th>
<th align="center">容量</th>
<th align="center">容错</th>
<th align="center">顺序度</th>
<th align="center">随机读</th>
<th align="center">顺序写</th>
<th align="center">随机写</th>
</tr>
</thead>
<tbody><tr>
<td align="center">0</td>
<td align="center">$n$</td>
<td align="center">0</td>
<td align="center">$n$</td>
<td align="center">$n$</td>
<td align="center">$n$</td>
<td align="center">$n$</td>
</tr>
<tr>
<td align="center">1</td>
<td align="center">$n/2$</td>
<td align="center"></td>
<td align="center">$&gt; n/2$</td>
<td align="center">$n$</td>
<td align="center">$n/2$</td>
<td align="center">$n/2$</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center">$n-1$</td>
<td align="center">1</td>
<td align="center">$n-1$</td>
<td align="center">$n-1$</td>
<td align="center">$n-1$</td>
<td align="center">$1/2$</td>
</tr>
<tr>
<td align="center">5</td>
<td align="center">$n-1$</td>
<td align="center">1</td>
<td align="center">$n-1$</td>
<td align="center">$n$</td>
<td align="center">$n-1$</td>
<td align="center"><strong>$n/4$</strong></td>
</tr>
</tbody></table>
<h3 id="fsck"><a href="#fsck" class="headerlink" title="fsck"></a>fsck</h3><p>扫描inodes里的所有数据块,检查bitmap的一致性</p>
<h3 id="日志"><a href="#日志" class="headerlink" title="日志"></a>日志</h3><p><a target="_blank" rel="noopener" href="http://linux.vbird.org/linux_basic/0230filesystem.php#top">鸟哥的Linux私房菜:Linux的ext2档案系统</a></p>
<p>在磁盘上保存所有对数据结构的操作,每次启动时重做这些操作,在内存里重新建立文件系统</p>
<p>优化</p>
<ul>
<li>批处理</li>
<li>Metadata journaling<ul>
<li>只对inode和bitmap做journaling,数据可以随意写入</li>
</ul>
</li>
</ul>

  
    
<script src="/js/guide.js"></script>

    <script>
      create_guide();
    </script>
  </div>
</div>

  
<script src="/js/main.js"></script>

  
<script src="/js/search.js"></script>

  
<script src="/js/highlight.js"></script>


</body>

</html>