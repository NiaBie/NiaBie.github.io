<!-- 通用模板 -->

<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <!-- jquery -->
  <script src="https://apps.bdimg.com/libs/jquery/1.10.2/jquery.min.js"></script>
  <script src="https://apps.bdimg.com/libs/jqueryui/1.10.4/jquery-ui.min.js"></script>

  
<link rel="stylesheet" href="/css/main.css">

<meta name="generator" content="Hexo 5.0.0"></head>

<body onload="my_load()"">

  <div class="web_name_box">
    
  </div>
  
  <!-- 顶部菜单栏 -->

<div class="menu_box shadow_box">
  <div class="menu_item_box left" id="menu_preview">preview</div>
  <div class="menu_item_box left" id="menu_tags">tags</div>
  <div class="menu_item_box left" id="menu_categories">categories</div>

  <div class="search_input_box left" id="search_input_box">
    <input type="search" placeholder="" id="search_input" class="search_input">
  </div>

  <div class="menu_item_box right" id="menu_next">next</div>
  
    <div class="menu_item_box right" id="menu_guide">guide</div>
  
  <div class="menu_item_box right" id="menu_site">sites</div>
</div>

<div class="tag_box shadow_box" id="tag_box"></div>

<div class="category_box shadow_box" id="category_box"></div>

<div class="site_box shadow_box" id="site_box">
  <span class="site_item">
    <a href="/">home</a>
  </span>
  <span class="site_item">
    <a href="/archives">archives</a>
  </span>
  <span class="site_item">
    <a target="_blank" rel="noopener" href="https://github.com/NiaBie">github</a>
  </span>
  <span class="site_item">
    <a href="/knife">knives</a>
  </span>
  <span class="site_item">
    <a href="/friends">links</a>
  </span>
</div>


  <!-- 附加导航 -->
  <div class="guide_box shadow_box" id="guide_box">
    <div class="tag_list_box" id="tag_list_box">
      <span class="guide_item">tags</span>
      
        
          <span class="tag_item">
            <a href="/tags/ffmpeg/">ffmpeg</a>
          </span>
        
          <span class="tag_item">
            <a href="/tags/opencv/">opencv</a>
          </span>
        
          <span class="tag_item">
            <a href="/tags/ndk/">ndk</a>
          </span>
        
      
    </div>

    <div class="line_box" id="guide_line_box"></div>
    <style>
      #guide_line_box {
        width: 90%;
      }
    </style>
    
    <div class="category_list_box" id="category_list_box">
      <span class="guide_item">categories</span>
      
        
      
    </div>

    <div class="guide_list_box border_box" id="guide_list_box"></div>
  </div>


<div class="search_result_box shadow_box" id="search_result_box">
  <div id="search_filter" class="search_list_box">
    <span id="search_filter_1" class="search_item">
      <a>only title</a>
    </span>
    <span id="search_filter_2" class="search_item">
      <a>title and content</a>
    </span>
  </div>
  <div id="search_result_list" class="search_result_list"></div>
</div>



<script>
  tags_name = new Array();
  tags_path = new Array();

  ''
    var temp = 'sage';
    tags_name.push(temp);
    temp = 'tags/sage/';
    tags_path.push(temp);
  ''
    var temp = 'python';
    tags_name.push(temp);
    temp = 'tags/python/';
    tags_path.push(temp);
  ''
    var temp = 'android studio';
    tags_name.push(temp);
    temp = 'tags/android-studio/';
    tags_path.push(temp);
  ''
    var temp = 'android';
    tags_name.push(temp);
    temp = 'tags/android/';
    tags_path.push(temp);
  ''
    var temp = 'adb';
    tags_name.push(temp);
    temp = 'tags/adb/';
    tags_path.push(temp);
  ''
    var temp = 'java';
    tags_name.push(temp);
    temp = 'tags/java/';
    tags_path.push(temp);
  ''
    var temp = 'charles';
    tags_name.push(temp);
    temp = 'tags/charles/';
    tags_path.push(temp);
  ''
    var temp = 'http';
    tags_name.push(temp);
    temp = 'tags/http/';
    tags_path.push(temp);
  ''
    var temp = 'proxy';
    tags_name.push(temp);
    temp = 'tags/proxy/';
    tags_path.push(temp);
  ''
    var temp = 'cubism';
    tags_name.push(temp);
    temp = 'tags/cubism/';
    tags_path.push(temp);
  ''
    var temp = 'javascript';
    tags_name.push(temp);
    temp = 'tags/javascript/';
    tags_path.push(temp);
  ''
    var temp = 'live2d';
    tags_name.push(temp);
    temp = 'tags/live2d/';
    tags_path.push(temp);
  ''
    var temp = 'typescript';
    tags_name.push(temp);
    temp = 'tags/typescript/';
    tags_path.push(temp);
  ''
    var temp = 'npm';
    tags_name.push(temp);
    temp = 'tags/npm/';
    tags_path.push(temp);
  ''
    var temp = 'FL Studio';
    tags_name.push(temp);
    temp = 'tags/FL-Studio/';
    tags_path.push(temp);
  ''
    var temp = 'midi';
    tags_name.push(temp);
    temp = 'tags/midi/';
    tags_path.push(temp);
  ''
    var temp = 'linux';
    tags_name.push(temp);
    temp = 'tags/linux/';
    tags_path.push(temp);
  ''
    var temp = 'powerline';
    tags_name.push(temp);
    temp = 'tags/powerline/';
    tags_path.push(temp);
  ''
    var temp = 'zsh';
    tags_name.push(temp);
    temp = 'tags/zsh/';
    tags_path.push(temp);
  ''
    var temp = 'vim';
    tags_name.push(temp);
    temp = 'tags/vim/';
    tags_path.push(temp);
  ''
    var temp = 'git';
    tags_name.push(temp);
    temp = 'tags/git/';
    tags_path.push(temp);
  ''
    var temp = 'pip';
    tags_name.push(temp);
    temp = 'tags/pip/';
    tags_path.push(temp);
  ''
    var temp = 'gnome';
    tags_name.push(temp);
    temp = 'tags/gnome/';
    tags_path.push(temp);
  ''
    var temp = 'c';
    tags_name.push(temp);
    temp = 'tags/c/';
    tags_path.push(temp);
  ''
    var temp = 'makefile';
    tags_name.push(temp);
    temp = 'tags/makefile/';
    tags_path.push(temp);
  ''
    var temp = 'PyQt5';
    tags_name.push(temp);
    temp = 'tags/PyQt5/';
    tags_path.push(temp);
  ''
    var temp = 'qt';
    tags_name.push(temp);
    temp = 'tags/qt/';
    tags_path.push(temp);
  ''
    var temp = 'cpp';
    tags_name.push(temp);
    temp = 'tags/cpp/';
    tags_path.push(temp);
  ''
    var temp = 'deb';
    tags_name.push(temp);
    temp = 'tags/deb/';
    tags_path.push(temp);
  ''
    var temp = 'debreate';
    tags_name.push(temp);
    temp = 'tags/debreate/';
    tags_path.push(temp);
  ''
    var temp = '华为';
    tags_name.push(temp);
    temp = 'tags/华为/';
    tags_path.push(temp);
  ''
    var temp = 'php';
    tags_name.push(temp);
    temp = 'tags/php/';
    tags_path.push(temp);
  ''
    var temp = 'apache';
    tags_name.push(temp);
    temp = 'tags/apache/';
    tags_path.push(temp);
  ''
    var temp = 'https';
    tags_name.push(temp);
    temp = 'tags/https/';
    tags_path.push(temp);
  ''
    var temp = 'latex';
    tags_name.push(temp);
    temp = 'tags/latex/';
    tags_path.push(temp);
  ''
    var temp = 'blender';
    tags_name.push(temp);
    temp = 'tags/blender/';
    tags_path.push(temp);
  ''
    var temp = '3D建模';
    tags_name.push(temp);
    temp = 'tags/3D建模/';
    tags_path.push(temp);
  ''
    var temp = 'html';
    tags_name.push(temp);
    temp = 'tags/html/';
    tags_path.push(temp);
  ''
    var temp = 'css';
    tags_name.push(temp);
    temp = 'tags/css/';
    tags_path.push(temp);
  ''
    var temp = 'bucket';
    tags_name.push(temp);
    temp = 'tags/bucket/';
    tags_path.push(temp);
  ''
    var temp = '七牛云';
    tags_name.push(temp);
    temp = 'tags/七牛云/';
    tags_path.push(temp);
  ''
    var temp = 'cdn';
    tags_name.push(temp);
    temp = 'tags/cdn/';
    tags_path.push(temp);
  ''
    var temp = 'chrome';
    tags_name.push(temp);
    temp = 'tags/chrome/';
    tags_path.push(temp);
  ''
    var temp = 'qqbrowser';
    tags_name.push(temp);
    temp = 'tags/qqbrowser/';
    tags_path.push(temp);
  ''
    var temp = 'cmake';
    tags_name.push(temp);
    temp = 'tags/cmake/';
    tags_path.push(temp);
  ''
    var temp = '正则表达式';
    tags_name.push(temp);
    temp = 'tags/正则表达式/';
    tags_path.push(temp);
  ''
    var temp = 'eigen';
    tags_name.push(temp);
    temp = 'tags/eigen/';
    tags_path.push(temp);
  ''
    var temp = 'ffmpeg';
    tags_name.push(temp);
    temp = 'tags/ffmpeg/';
    tags_path.push(temp);
  ''
    var temp = 'opencv';
    tags_name.push(temp);
    temp = 'tags/opencv/';
    tags_path.push(temp);
  ''
    var temp = 'ndk';
    tags_name.push(temp);
    temp = 'tags/ndk/';
    tags_path.push(temp);
  ''
    var temp = 'gcc';
    tags_name.push(temp);
    temp = 'tags/gcc/';
    tags_path.push(temp);
  ''
    var temp = 'assemly';
    tags_name.push(temp);
    temp = 'tags/assemly/';
    tags_path.push(temp);
  ''
    var temp = 'gdb';
    tags_name.push(temp);
    temp = 'tags/gdb/';
    tags_path.push(temp);
  ''
    var temp = 'ssh';
    tags_name.push(temp);
    temp = 'tags/ssh/';
    tags_path.push(temp);
  ''
    var temp = 'windows';
    tags_name.push(temp);
    temp = 'tags/windows/';
    tags_path.push(temp);
  ''
    var temp = 'grub';
    tags_name.push(temp);
    temp = 'tags/grub/';
    tags_path.push(temp);
  ''
    var temp = 'hexo';
    tags_name.push(temp);
    temp = 'tags/hexo/';
    tags_path.push(temp);
  ''
    var temp = 'swig';
    tags_name.push(temp);
    temp = 'tags/swig/';
    tags_path.push(temp);
  ''
    var temp = 'ejs';
    tags_name.push(temp);
    temp = 'tags/ejs/';
    tags_path.push(temp);
  ''
    var temp = 'mathjax';
    tags_name.push(temp);
    temp = 'tags/mathjax/';
    tags_path.push(temp);
  ''
    var temp = 'katex';
    tags_name.push(temp);
    temp = 'tags/katex/';
    tags_path.push(temp);
  ''
    var temp = '阿里云';
    tags_name.push(temp);
    temp = 'tags/阿里云/';
    tags_path.push(temp);
  ''
    var temp = 'shell';
    tags_name.push(temp);
    temp = 'tags/shell/';
    tags_path.push(temp);
  ''
    var temp = 'jni';
    tags_name.push(temp);
    temp = 'tags/jni/';
    tags_path.push(temp);
  ''
    var temp = 'jsdelivr';
    tags_name.push(temp);
    temp = 'tags/jsdelivr/';
    tags_path.push(temp);
  ''
    var temp = 'jquery';
    tags_name.push(temp);
    temp = 'tags/jquery/';
    tags_path.push(temp);
  ''
    var temp = 'krita';
    tags_name.push(temp);
    temp = 'tags/krita/';
    tags_path.push(temp);
  ''
    var temp = 'mac';
    tags_name.push(temp);
    temp = 'tags/mac/';
    tags_path.push(temp);
  ''
    var temp = 'brew';
    tags_name.push(temp);
    temp = 'tags/brew/';
    tags_path.push(temp);
  ''
    var temp = 'matlab';
    tags_name.push(temp);
    temp = 'tags/matlab/';
    tags_path.push(temp);
  ''
    var temp = 'visual studio';
    tags_name.push(temp);
    temp = 'tags/visual-studio/';
    tags_path.push(temp);
  ''
    var temp = 'csharp';
    tags_name.push(temp);
    temp = 'tags/csharp/';
    tags_path.push(temp);
  ''
    var temp = 'mysql';
    tags_name.push(temp);
    temp = 'tags/mysql/';
    tags_path.push(temp);
  ''
    var temp = 'sql';
    tags_name.push(temp);
    temp = 'tags/sql/';
    tags_path.push(temp);
  ''
    var temp = 'unpkg';
    tags_name.push(temp);
    temp = 'tags/unpkg/';
    tags_path.push(temp);
  ''
    var temp = 'bfs';
    tags_name.push(temp);
    temp = 'tags/bfs/';
    tags_path.push(temp);
  ''
    var temp = 'dfs';
    tags_name.push(temp);
    temp = 'tags/dfs/';
    tags_path.push(temp);
  ''
    var temp = 'dijkstra算法';
    tags_name.push(temp);
    temp = 'tags/dijkstra算法/';
    tags_path.push(temp);
  ''
    var temp = 'dinic算法';
    tags_name.push(temp);
    temp = 'tags/dinic算法/';
    tags_path.push(temp);
  ''
    var temp = 'ek算法';
    tags_name.push(temp);
    temp = 'tags/ek算法/';
    tags_path.push(temp);
  ''
    var temp = 'floyd算法';
    tags_name.push(temp);
    temp = 'tags/floyd算法/';
    tags_path.push(temp);
  ''
    var temp = 'km算法';
    tags_name.push(temp);
    temp = 'tags/km算法/';
    tags_path.push(temp);
  ''
    var temp = 'kmp算法';
    tags_name.push(temp);
    temp = 'tags/kmp算法/';
    tags_path.push(temp);
  ''
    var temp = 'kruskal算法';
    tags_name.push(temp);
    temp = 'tags/kruskal算法/';
    tags_path.push(temp);
  ''
    var temp = 'morris算法';
    tags_name.push(temp);
    temp = 'tags/morris算法/';
    tags_path.push(temp);
  ''
    var temp = 'prim算法';
    tags_name.push(temp);
    temp = 'tags/prim算法/';
    tags_path.push(temp);
  ''
    var temp = 'tarjan算法';
    tags_name.push(temp);
    temp = 'tags/tarjan算法/';
    tags_path.push(temp);
  ''
    var temp = '树的遍历';
    tags_name.push(temp);
    temp = 'tags/树的遍历/';
    tags_path.push(temp);
  ''
    var temp = '匈牙利算法';
    tags_name.push(temp);
    temp = 'tags/匈牙利算法/';
    tags_path.push(temp);
  ''
    var temp = 'orb-slam';
    tags_name.push(temp);
    temp = 'tags/orb-slam/';
    tags_path.push(temp);
  ''
    var temp = 'photoshop';
    tags_name.push(temp);
    temp = 'tags/photoshop/';
    tags_path.push(temp);
  ''
    var temp = '绘画';
    tags_name.push(temp);
    temp = 'tags/绘画/';
    tags_path.push(temp);
  ''
    var temp = 'numpy';
    tags_name.push(temp);
    temp = 'tags/numpy/';
    tags_path.push(temp);
  ''
    var temp = 'sklearn';
    tags_name.push(temp);
    temp = 'tags/sklearn/';
    tags_path.push(temp);
  ''
    var temp = 'matplotlib';
    tags_name.push(temp);
    temp = 'tags/matplotlib/';
    tags_path.push(temp);
  ''
    var temp = '反编译';
    tags_name.push(temp);
    temp = 'tags/反编译/';
    tags_path.push(temp);
  ''
    var temp = 'slenium';
    tags_name.push(temp);
    temp = 'tags/slenium/';
    tags_path.push(temp);
  ''
    var temp = 'phantomjs';
    tags_name.push(temp);
    temp = 'tags/phantomjs/';
    tags_path.push(temp);
  ''
    var temp = 'rss';
    tags_name.push(temp);
    temp = 'tags/rss/';
    tags_path.push(temp);
  ''
    var temp = 'xml';
    tags_name.push(temp);
    temp = 'tags/xml/';
    tags_path.push(temp);
  ''
    var temp = '爬虫';
    tags_name.push(temp);
    temp = 'tags/爬虫/';
    tags_path.push(temp);
  ''
    var temp = 'ajax';
    tags_name.push(temp);
    temp = 'tags/ajax/';
    tags_path.push(temp);
  ''
    var temp = 'termux';
    tags_name.push(temp);
    temp = 'tags/termux/';
    tags_path.push(temp);
  ''
    var temp = '内网穿透';
    tags_name.push(temp);
    temp = 'tags/内网穿透/';
    tags_path.push(temp);
  ''
    var temp = 'stitch';
    tags_name.push(temp);
    temp = 'tags/stitch/';
    tags_path.push(temp);
  ''
    var temp = 'sublime';
    tags_name.push(temp);
    temp = 'tags/sublime/';
    tags_path.push(temp);
  ''
    var temp = 'svg';
    tags_name.push(temp);
    temp = 'tags/svg/';
    tags_path.push(temp);
  ''
    var temp = 'tmux';
    tags_name.push(temp);
    temp = 'tags/tmux/';
    tags_path.push(temp);
  ''
    var temp = 'tikz';
    tags_name.push(temp);
    temp = 'tags/tikz/';
    tags_path.push(temp);
  ''
    var temp = 'ubuntu';
    tags_name.push(temp);
    temp = 'tags/ubuntu/';
    tags_path.push(temp);
  ''
    var temp = 'wlan';
    tags_name.push(temp);
    temp = 'tags/wlan/';
    tags_path.push(temp);
  ''
    var temp = 'lol';
    tags_name.push(temp);
    temp = 'tags/lol/';
    tags_path.push(temp);
  ''
    var temp = 'hyper';
    tags_name.push(temp);
    temp = 'tags/hyper/';
    tags_path.push(temp);
  ''
    var temp = 'vpn';
    tags_name.push(temp);
    temp = 'tags/vpn/';
    tags_path.push(temp);
  ''
    var temp = 'shadowsocks';
    tags_name.push(temp);
    temp = 'tags/shadowsocks/';
    tags_path.push(temp);
  ''
    var temp = 'ssr';
    tags_name.push(temp);
    temp = 'tags/ssr/';
    tags_path.push(temp);
  ''
    var temp = '驱动';
    tags_name.push(temp);
    temp = 'tags/驱动/';
    tags_path.push(temp);
  ''
    var temp = 'unity';
    tags_name.push(temp);
    temp = 'tags/unity/';
    tags_path.push(temp);
  ''
    var temp = 'vlfeat';
    tags_name.push(temp);
    temp = 'tags/vlfeat/';
    tags_path.push(temp);
  ''
    var temp = 'vscode';
    tags_name.push(temp);
    temp = 'tags/vscode/';
    tags_path.push(temp);
  ''
    var temp = 'vundle';
    tags_name.push(temp);
    temp = 'tags/vundle/';
    tags_path.push(temp);
  ''
    var temp = 'wegame';
    tags_name.push(temp);
    temp = 'tags/wegame/';
    tags_path.push(temp);
  ''
    var temp = 'mathematica';
    tags_name.push(temp);
    temp = 'tags/mathematica/';
    tags_path.push(temp);
  ''
    var temp = 'wordpress';
    tags_name.push(temp);
    temp = 'tags/wordpress/';
    tags_path.push(temp);
  ''
    var temp = 'xampp';
    tags_name.push(temp);
    temp = 'tags/xampp/';
    tags_path.push(temp);
  ''
    var temp = '帧同步';
    tags_name.push(temp);
    temp = 'tags/帧同步/';
    tags_path.push(temp);
  ''
    var temp = '航位推算';
    tags_name.push(temp);
    temp = 'tags/航位推算/';
    tags_path.push(temp);
  ''
    var temp = 'socket';
    tags_name.push(temp);
    temp = 'tags/socket/';
    tags_path.push(temp);
  ''
    var temp = '百度网盘';
    tags_name.push(temp);
    temp = 'tags/百度网盘/';
    tags_path.push(temp);
  ''
    var temp = 'sai';
    tags_name.push(temp);
    temp = 'tags/sai/';
    tags_path.push(temp);
  ''
    var temp = 'medibang paint';
    tags_name.push(temp);
    temp = 'tags/medibang-paint/';
    tags_path.push(temp);
  ''
    var temp = 'gradle';
    tags_name.push(temp);
    temp = 'tags/gradle/';
    tags_path.push(temp);
  ''
    var temp = 'javacv';
    tags_name.push(temp);
    temp = 'tags/javacv/';
    tags_path.push(temp);
  ''
    var temp = '微电子';
    tags_name.push(temp);
    temp = 'tags/微电子/';
    tags_path.push(temp);
  ''
  // 因为path和name只有前缀不同,所以分别排序之后相对顺序还是一样的
  tags_name.sort();
  tags_path.sort();
  for (var i = 0; i < tags_name.length; i ++)
  {
    $("#tag_box").append("<span class='tag_item'><a href='/" + tags_path[i] + "'>" + tags_name[i] + "</a></span>\n");
  }


  categories_name = new Array();
  categories_path = new Array();

  ''
    var temp = '问题求解';
    categories_name.push(temp);
    temp = 'categories/问题求解/';
    categories_path.push(temp);
  ''
    var temp = '操作系统';
    categories_name.push(temp);
    temp = 'categories/操作系统/';
    categories_path.push(temp);
  ''
    var temp = '人工智能';
    categories_name.push(temp);
    temp = 'categories/人工智能/';
    categories_path.push(temp);
  ''
    var temp = '微电子';
    categories_name.push(temp);
    temp = 'categories/微电子/';
    categories_path.push(temp);
  ''
    var temp = '数据库';
    categories_name.push(temp);
    temp = 'categories/数据库/';
    categories_path.push(temp);
  ''
    var temp = '数据通信';
    categories_name.push(temp);
    temp = 'categories/数据通信/';
    categories_path.push(temp);
  ''
    var temp = '数理逻辑';
    categories_name.push(temp);
    temp = 'categories/数理逻辑/';
    categories_path.push(temp);
  ''
    var temp = '概率论与数理统计';
    categories_name.push(temp);
    temp = 'categories/概率论与数理统计/';
    categories_path.push(temp);
  ''
    var temp = '计算机网络';
    categories_name.push(temp);
    temp = 'categories/计算机网络/';
    categories_path.push(temp);
  ''
  // 因为path和name只有前缀不同,所以分别排序之后相对顺序还是一样的
  categories_name.sort();
  categories_path.sort();
  for (var i = 0; i < categories_name.length; i ++)
  {
    $("#category_box").append("<span class='category_item'><a href='/" + categories_path[i] + "'>" + categories_name[i] + "</a></span>\n");
  }
</script>

<script>
  // TODO 搜索
</script>
  <!-- latex公式渲染 -->



<script>
  document.temp_latex = '1';// 全局变量,latex公式渲染方式
</script>


<!-- mathjax -->
<script type="text/x-mathjax-config">
  console.log("mathjax rendering");
  
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [
        ['$','$']
      ],
      displayMath: [
        ['$$', '$$']
      ],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {  
      noUndefined: { 
        attributes: { 
          mathcolor: "red",
          mathbackground: "#FFEEEE",
          mathsize: "10%"
        } 
      }
    }
  });

  MathJax.Hub.Queue(["Typeset", MathJax.Hub])
</script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/hexo-simple-theme/hexo_latex@1.0.4/mathjax/MathJax.js?config=TeX-AMS_HTML-full"></script>
<script>
  console.log("mathjax rendering");
</script>


  <!-- 文章 -->

<div class="main_container">
  <div class="main_box border_box">
    <span class="post_title" id="post_title">ffmpeg笔记</span>
    <br>
    <span class="post_date">2020-11-24</span>
    
    <div class="line_box" id="post_line_box"></div>
    <style>
      #post_line_box {
        width: 100%;
        margin-top: 10px;
      }
    </style>
  
    <h1 id="ubuntu安装"><a href="#ubuntu安装" class="headerlink" title="ubuntu安装"></a>ubuntu安装</h1><ul>
<li>设置make参数</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">./configure   --<span class="built_in">enable</span>-shared  --prefix=/usr/<span class="built_in">local</span>/ffmpeg  --<span class="built_in">enable</span>-gpl --<span class="built_in">enable</span>-libx264  --<span class="built_in">enable</span>-libx265</span><br><span class="line">make -j4 &amp;&amp; make install</span><br></pre></td></tr></table></figure>

<ul>
<li>修改链接库路径<ul>
<li>在<code>bin</code>目录下查看动态库的依赖关系<code>ldd ffmpeg</code></li>
<li>修改<code>.zshrc</code>:<code>export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/ffmpeg/lib</code>(安装目录下的lib)</li>
</ul>
</li>
</ul>
<h1 id="Android端静态ffmpeg库与OpenCV交叉编译"><a href="#Android端静态ffmpeg库与OpenCV交叉编译" class="headerlink" title="Android端静态ffmpeg库与OpenCV交叉编译"></a>Android端静态ffmpeg库与OpenCV交叉编译</h1><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/lijiyu0219/article/details/105842255">参考:CSDN</a></p>
<h2 id="编写ffmpeg的编译脚本"><a href="#编写ffmpeg的编译脚本" class="headerlink" title="编写ffmpeg的编译脚本"></a>编写ffmpeg的编译脚本</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">TOOLCHAIN=/home/lynx/fuck_mount/AndroidSDK/ndk/21.3.6528147/toolchains/llvm/prebuilt/linux-x86_64</span><br><span class="line"></span><br><span class="line">./configure \</span><br><span class="line">  --prefix=/home/lynx/fuck_mount/ffmpeg/android_static \</span><br><span class="line">  --<span class="built_in">enable</span>-avresample \</span><br><span class="line">  --<span class="built_in">disable</span>-shared \</span><br><span class="line">  --<span class="built_in">enable</span>-static \</span><br><span class="line">  --<span class="built_in">disable</span>-programs \</span><br><span class="line">  --<span class="built_in">disable</span>-doc \</span><br><span class="line">  --<span class="built_in">disable</span>-avdevice \</span><br><span class="line">  --<span class="built_in">disable</span>-postproc \</span><br><span class="line">  --target-os=android \</span><br><span class="line">  --arch=aarch64 \</span><br><span class="line">  --<span class="built_in">enable</span>-cross-compile \</span><br><span class="line">  --cross-prefix=<span class="variable">$TOOLCHAIN</span>/bin/aarch64-linux-android- \</span><br><span class="line">  --cc=<span class="variable">$TOOLCHAIN</span>/bin/aarch64-linux-android30-clang \</span><br><span class="line">  --cxx=<span class="variable">$TOOLCHAIN</span>/bin/aarch64-linux-android30-clang++ \</span><br><span class="line">  --sysroot=<span class="variable">$TOOLCHAIN</span>/sysroot</span><br></pre></td></tr></table></figure>

<h2 id="修改openCV的cmake文件"><a href="#修改openCV的cmake文件" class="headerlink" title="修改openCV的cmake文件"></a>修改openCV的cmake文件</h2><ol>
<li><code>/CmakeLists.txt</code></li>
</ol>
<figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="comment"># OCV_OPTION(WITH_FFMPEG &quot;Include FFMPEG support&quot; (NOT ANDROID)</span></span><br><span class="line">OCV_OPTION(WITH_FFMPEG <span class="string">&quot;Include FFMPEG support&quot;</span> (<span class="keyword">ON</span>)</span><br><span class="line">  VISIBLE_IF <span class="keyword">NOT</span> IOS <span class="keyword">AND</span> <span class="keyword">NOT</span> WINRT</span><br><span class="line">  VERIFY HAVE_FFMPEG)</span><br></pre></td></tr></table></figure>

<h2 id="常见错误"><a href="#常见错误" class="headerlink" title="常见错误"></a>常见错误</h2><ol>
<li>参数冲突导致的错误<br><code>/usr/bin/ld: unknown architecture of input file `libavutil/log2_tab.o&#39; is incompatible with i386:x86-64 output</code><br><code>/usr/bin/ld: unknown architecture of input file `libavutil/reverse.o&#39; is incompatible with i386:x86-64 output</code></li>
</ol>
<p>直接删掉整个源代码文件夹, 重新下载新的源代码进行编译</p>
<h1 id="Android端动态ffmpeg库与OpenCV交叉编译"><a href="#Android端动态ffmpeg库与OpenCV交叉编译" class="headerlink" title="Android端动态ffmpeg库与OpenCV交叉编译"></a>Android端动态ffmpeg库与OpenCV交叉编译</h1><h2 id="编写ffmpeg的编译脚本-1"><a href="#编写ffmpeg的编译脚本-1" class="headerlink" title="编写ffmpeg的编译脚本"></a>编写ffmpeg的编译脚本</h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/baidu_29221887/article/details/88655217">参考:CSDN</a></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">TOOLCHAIN=/home/lynx/fuck_mount/AndroidSDK/ndk/21.3.6528147/toolchains/llvm/prebuilt/linux-x86_64</span><br><span class="line"></span><br><span class="line">./configure \</span><br><span class="line">  --target-os=android \</span><br><span class="line">  --prefix=/home/lynx/fuck_mount/ffmpeg/android_shared \</span><br><span class="line">  --<span class="built_in">enable</span>-cross-compile --<span class="built_in">enable</span>-runtime-cpudetect \</span><br><span class="line">  --<span class="built_in">enable</span>-jni --<span class="built_in">enable</span>-mediacodec --<span class="built_in">enable</span>-avresample \</span><br><span class="line">  --<span class="built_in">disable</span>-asm --<span class="built_in">disable</span>-x86asm --<span class="built_in">disable</span>-network --<span class="built_in">disable</span>-doc \</span><br><span class="line">  --<span class="built_in">disable</span>-stripping --<span class="built_in">disable</span>-ffprobe --<span class="built_in">disable</span>-ffplay --<span class="built_in">disable</span>-debug \</span><br><span class="line">  --<span class="built_in">enable</span>-gpl --<span class="built_in">enable</span>-shared \</span><br><span class="line">  --arch=aarch64 \</span><br><span class="line">  --cross-prefix=<span class="variable">$TOOLCHAIN</span>/bin/aarch64-linux-android- \</span><br><span class="line">  --cc=<span class="variable">$TOOLCHAIN</span>/bin/aarch64-linux-android30-clang \</span><br><span class="line">  --cxx=<span class="variable">$TOOLCHAIN</span>/bin/aarch64-linux-android30-clang++ \</span><br><span class="line">  --nm=<span class="variable">$TOOLCHAIN</span>/bin/aarch64-linux-android-nm \</span><br><span class="line">  --sysroot=<span class="variable">$TOOLCHAIN</span>/sysroot \</span><br><span class="line">  --extra-cflags=<span class="string">&quot;-fPIC -D__thumb__ -mthumb -Wfatal-errors -Wno-deprecated -mfloat-abi=softfp -marm -march=armv8-a&quot;</span></span><br></pre></td></tr></table></figure>

<h1 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h1><h2 id="视频转换"><a href="#视频转换" class="headerlink" title="视频转换"></a>视频转换</h2><h3 id="gif转视频"><a href="#gif转视频" class="headerlink" title="gif转视频"></a>gif转视频</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ffmpeg -f gif -i draw1.gif draw1.mpg</span><br></pre></td></tr></table></figure>

<h2 id="视频合并"><a href="#视频合并" class="headerlink" title="视频合并"></a>视频合并</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ffmpeg -i <span class="string">&quot;concat:draw1.mpg|draw2.mpg|pen.mpg|edit.mpg|clip.mpg&quot;</span> demo.mp4</span><br></pre></td></tr></table></figure>

<ul>
<li>注意添加<code>concat</code></li>
<li>只有特定格式的视频才能合并</li>
</ul>
<h2 id="合并音视频-添加音轨"><a href="#合并音视频-添加音轨" class="headerlink" title="合并音视频(添加音轨)"></a>合并音视频(添加音轨)</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ffmpeg -i input.aac -i input.mp4 output.mp4</span><br></pre></td></tr></table></figure>

<h2 id="查看文件信息"><a href="#查看文件信息" class="headerlink" title="查看文件信息"></a>查看文件信息</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ffmpeg -i test.mp4</span><br></pre></td></tr></table></figure>

<h2 id="视频剪切"><a href="#视频剪切" class="headerlink" title="视频剪切"></a>视频剪切</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 指定时长</span></span><br><span class="line">ffmpeg -i input.mp4 -ss 00:46:26 -t 00:57:45 -c copy output.mp4</span><br><span class="line"><span class="comment"># 指定结束时间</span></span><br><span class="line">ffmpeg -i input.mp4 -ss 00:46:26 -to 00:57:45 -c copy output.mp4</span><br></pre></td></tr></table></figure>

<h2 id="视频截图"><a href="#视频截图" class="headerlink" title="视频截图"></a>视频截图</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 截取单帧</span></span><br><span class="line">ffmpeg -i input.mp4 -ss 00:00:00 -vframes 1 output.jpg</span><br><span class="line"><span class="comment"># 固定时间开始连续截取多张</span></span><br><span class="line">ffmpeg -i input.mp4 -ss 00:00:00 -vframes 10 output.jpg</span><br></pre></td></tr></table></figure>

<h2 id="质量调整"><a href="#质量调整" class="headerlink" title="质量调整"></a>质量调整</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 码率</span></span><br><span class="line">ffmpeg -i input.mp4 -b 1.5M output.mp4</span><br><span class="line"><span class="comment"># 帧率(fps)</span></span><br><span class="line">ffmpeg -i input.mp4 -r 25 output.mp4</span><br><span class="line"><span class="comment"># 分辨率, 必须是2的整数倍</span></span><br><span class="line">ffmpeg -i input.mp4 -vf scale=400:600 output.mp4 <span class="comment"># 保持比例</span></span><br><span class="line">ffmpeg -i input.mp4 -vf scale=400:-2 output.mp4</span><br><span class="line"><span class="comment"># 直接控制输出文件大小, 有bug, 视频的时长不对</span></span><br><span class="line">ffmpeg -i input.mp4 -fs 10000k output.mp4</span><br></pre></td></tr></table></figure>

<h2 id="格式转换"><a href="#格式转换" class="headerlink" title="格式转换"></a>格式转换</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 视频格式转换</span></span><br><span class="line">ffmpeg -i input.mp4 output.avi</span><br></pre></td></tr></table></figure>

<h2 id="图像分辨率修改"><a href="#图像分辨率修改" class="headerlink" title="图像分辨率修改"></a>图像分辨率修改</h2><p><a target="_blank" rel="noopener" href="https://trac.ffmpeg.org/wiki/Scaling">参考</a></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 指定长宽</span></span><br><span class="line">ffmpeg -i input.jpg -vf scale=320:240 output.png</span><br><span class="line"><span class="comment"># 等比例缩放</span></span><br><span class="line">ffmpeg -i input.jpg -vf scale=320:-1 output.png</span><br><span class="line"><span class="comment"># 倍数缩放</span></span><br><span class="line">ffmpeg -i input.jpg -vf scale=iw*2:ih output.png</span><br><span class="line">ffmpeg -i input.jpg -vf <span class="string">&quot;scale=iw*.5:ih*.5&quot;</span> output.png</span><br><span class="line">ffmpeg -i input.jpg -vf <span class="string">&quot;scale=iw/2:ih/2&quot;</span> output.png</span><br></pre></td></tr></table></figure>

<h2 id="提取音频"><a href="#提取音频" class="headerlink" title="提取音频"></a>提取音频</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 提取完整音频</span></span><br><span class="line">ffmpeg -i test.mp4 -q:a 0 -map a test.mp3</span><br><span class="line"><span class="comment"># 只提取音频流而不重新编码(不能是mp3格式, 只能是aac或m4a)</span></span><br><span class="line">ffmpeg -i test.mp4 -vn -acodec copy test.m4a</span><br></pre></td></tr></table></figure>

<h2 id="倒放"><a href="#倒放" class="headerlink" title="倒放"></a>倒放</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 视频倒放, 音频不变</span></span><br><span class="line">ffmpeg -i input.mp4 -vf reverse output.mp4</span><br><span class="line"><span class="comment"># 音频倒放, 视频不变</span></span><br><span class="line">ffmpeg -i input.mp4 -map 0 -c:v copy -af areverse output.mp4</span><br><span class="line"><span class="comment"># 音视频倒放</span></span><br><span class="line">ffmpeg -i input.mp4 -vf reverse -af areverse -preset superfast output.mp4</span><br></pre></td></tr></table></figure>

<h2 id="旋转与翻转"><a href="#旋转与翻转" class="headerlink" title="旋转与翻转"></a>旋转与翻转</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 水平翻转</span></span><br><span class="line">ffmpeg -i input.mp4 -vf <span class="string">&quot;hflip&quot;</span> output.mp4</span><br><span class="line"><span class="comment"># 垂直翻转</span></span><br><span class="line">ffmpeg -i input.mp4 -vf <span class="string">&quot;vflip&quot;</span> output.mp4</span><br><span class="line"><span class="comment"># 逆时针旋转90度并垂直翻转</span></span><br><span class="line">ffmpeg -i input.mp4 -vf <span class="string">&quot;transpose=0&quot;</span> output.mp4</span><br><span class="line"><span class="comment"># 顺时针旋转90度</span></span><br><span class="line">ffmpeg -i input.mp4 -vf <span class="string">&quot;transpose=1&quot;</span> output.mp4</span><br><span class="line"><span class="comment"># 逆时针旋转90度</span></span><br><span class="line">ffmpeg -i input.mp4 -vf <span class="string">&quot;transpose=2&quot;</span> output.mp4</span><br><span class="line"><span class="comment"># 顺时针旋转90度并垂直翻转</span></span><br><span class="line">ffmpeg -i input.mp4 -vf <span class="string">&quot;transpose=3&quot;</span> output.mp4</span><br><span class="line"><span class="comment"># 自定义角度, 但是图像的尺寸不会变, 会有黑边</span></span><br><span class="line">ffmpeg -i input.mp4 -vf <span class="string">&quot;rotate=PI/2&quot;</span> output.mp4</span><br></pre></td></tr></table></figure>

<h3 id="常见错误-1"><a href="#常见错误-1" class="headerlink" title="常见错误"></a>常见错误</h3><ol>
<li><code> Default encoder for format mp3 (codec mp3) is probably disabled. Please choose an encoder manually.</code>(<strong>TODO</strong>)<ol>
<li>先安装<code>libmp3lame-dev</code></li>
<li>再重新编译ffmpeg: 添加<code>--enable-libmp3lame</code>参数</li>
</ol>
</li>
</ol>

  
    
<script src="/js/guide.js"></script>

    <script>
      create_guide();
    </script>
  </div>
</div>

  
<script src="/js/main.js"></script>

  
<script src="/js/search.js"></script>

  
<script src="/js/highlight.js"></script>


</body>

</html>